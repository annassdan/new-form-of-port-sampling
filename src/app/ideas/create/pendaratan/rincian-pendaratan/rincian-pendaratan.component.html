<div  id="dialog-rincian-pendaratan">
  <div  #scrollMe *ngIf="currentPendaratanState.formRincianPendaratan$ |async"
       [formGroup]="currentPendaratanState.formRincianPendaratan$ |async"
       class="form-rincian-pendaratan">
    <mat-toolbar *ngIf="!(rootState.asSmallSize$ | async) ? (toolbarWidth === toolbarWidthOnBig) : true"
                 color="primary" class="dialog-toolbar"
                 [ngStyle]="{ width : (rootState.asSmallSize$ | async) ? toolbarWidthOnSmall : toolbarWidth}">
      <mat-icon class="icon-of-dialog">double_arrow</mat-icon>
      <!-- title -->
      <h5 [ngClass]="isFormControlEmpty('namaKapal', currentPendaratanState.formRincianPendaratan$ | async) ? 'conditional-accent title-of-dialog' : 'title-of-dialog'" >
        {{extractFormControlValue('namaKapal', currentPendaratanState.formRincianPendaratan$ | async, defaultNamaKapal)}}
      </h5>

      <!--invisible fake button-->
      <button #fake mat-flat-button></button>
      <!--spacer-->
      <span class="spacer"></span>

      <button mat-icon-button (click)="closeDialog()">
        <mat-icon>clear</mat-icon>
      </button>
    </mat-toolbar>

    <!--  <div class="form-content-wrapper ">-->
    <div @fade *ngIf="(!(rootState.asSmallSize$ | async) ? (toolbarWidth === toolbarWidthOnBig) : true); else loading"
         class="row form-content-wrapper">

      <div class="col-md-12">
        <mat-card >
          <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>Informasi Pendaratan Kapal</mat-card-title>
            <mat-card-subtitle>Informasi mengenai pendaratan kapal yang disampling</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>

            <div class="row">

              <!--Nama Kapal-->
              <div class="col-md-6">
                <mat-form-field appearance="outline">
                  <mat-label>Nama Kapal</mat-label>
                  <input #targetNamaKapal="matInput" autocomplete="off"
                         formControlName="namaKapal"
                         appMatInputNext [nextTarget]="targetAlatTangkap"
                         matInput placeholder="Nama Kapal">
                </mat-form-field>
              </div>

              <!--Alat Tangkap-->
<!--              <div class="col-md-6">-->
<!--                <mat-form-field appearance="outline">-->
<!--                  <mat-label>Alat Tangkap</mat-label>-->
<!--                  <input [matAutocomplete]="autoAlatTangkap"-->
<!--                         #targetAlatTangkap="matAutocompleteTrigger"-->
<!--                         formControlName="uuidAlatTangkap"-->
<!--                         autocomplete="off" matInput placeholder="Alat Tangkap"-->
<!--                         appMatAutocompleteNext [nextTarget]="targetJumlahKapalPenangkap"-->
<!--                         [previousTarget]="targetNamaKapal">-->
<!--                  <mat-autocomplete #autoAlatTangkap="matAutocomplete">-->
<!--                    <mat-option value="Pukat Cincin">Pukat Cincin</mat-option>-->
<!--                    <mat-option value="Pukat Rawai">Pukat Rawai</mat-option>-->
<!--                  </mat-autocomplete>-->
<!--                </mat-form-field>-->
<!--              </div>-->
              <div class="col-md-6">
                <i-autocomplete
                  #targetAlatTangkap="iAutocomplete"
                  appearance="outline"
                  placeholder="Alat Tangkap"
                  formGroupName="uuidAlatTangkap"
                  displayProp="namaAlatTangkap"
                  mode="initially"
                  filterOnProp="namaAlatTangkap"
                  [targetOptions]="organisasiService.getAlatTangkap">
                </i-autocomplete>
              </div>

              <!--Penampung & penangkap-->
              <div class="col-md-6 row cause-slide-toggle-section">
                <div class="col-md-6 slide-toggle-section">
                  <section>
                    <mat-slide-toggle color="accent" formControlName="penampung">Penampung</mat-slide-toggle>
                  </section>
                </div>
                <div class="col-md-6 slide-toggle-section">
                  <section>
                    <mat-slide-toggle color="accent" formControlName="penangkap">Penangkap</mat-slide-toggle>
                  </section>
                </div>
              </div>

              <!--Jumlah Kapal penangkap-->
              <div class="col-md-6">
                <mat-form-field appearance="outline">
                  <mat-label>Jumlah Kapal Penangkap</mat-label>
                  <input #targetJumlahKapalPenangkap autocomplete="off"
                         [textMask]="standardInputMask('', ' Buah')"
                         formControlName="jumlahKapalPenangkap"
                         appMatInputNext [previousTarget]="targetAlatTangkap"
                         [nextTarget]="targetJumlahSetting"
                         matInput placeholder="Jumlah Kapal Penangkap">
                </mat-form-field>
              </div>

              <!--Jumlah Setting-->
              <div class="col-md-6">
                <mat-form-field appearance="outline">
                  <mat-label>Jumlah Setting</mat-label>
                  <input #targetJumlahSetting autocomplete="off"
                         [textMask]="standardInputMask()"
                         formControlName="jumlahSetting"
                         appMatInputNext [nextTarget]="targetJumlahMataPancing"
                         [previousTarget]="targetJumlahKapalPenangkap"
                         matInput placeholder="Jumlah Kapal Penangkap">
                </mat-form-field>
              </div>

              <!--Jumlah mata pancing-->
              <div class="col-md-6">
                <mat-form-field appearance="outline">
                  <mat-label>Jumlah Mata Pancing</mat-label>
                  <input #targetJumlahMataPancing autocomplete="off"
                         [textMask]="standardInputMask()"
                         formControlName="jumlahMataPancing"
                         appMatInputNext [nextTarget]="targetGridDaerahPenangkapan"
                         [previousTarget]="targetJumlahSetting"
                         matInput placeholder="Jumlah Mata Pancing">
                </mat-form-field>
              </div>

              <!-- Rumpon & Cahaya -->
              <div class="col-md-6 row cause-slide-toggle-section">
                <div class="col-md-6 slide-toggle-section">
                  <section>
                    <mat-slide-toggle color="accent" formControlName="rumpon">Rumpon</mat-slide-toggle>
                  </section>
                </div>
                <div class="col-md-6 slide-toggle-section">
                  <section>
                    <mat-slide-toggle color="accent" formControlName="cahaya">Cahaya</mat-slide-toggle>
                  </section>
                </div>
              </div>

              <!--Grid daerah Penangkapan-->
              <div class="col-md-6">
                <mat-form-field appearance="outline">
                  <mat-label>Grid D. Penangkapan</mat-label>
                  <input #targetGridDaerahPenangkapan autocomplete="off"
                         formControlName="daerahPenangkapan"
                         appMatInputNext [nextTarget]="targetJumlahHariPerTrip"
                         [previousTarget]="targetJumlahMataPancing"
                         matInput placeholder="Grid D. Penangkapan">
                </mat-form-field>
              </div>

              <!--Jumlah hari per trip-->
              <div class="col-md-6">
                <mat-form-field appearance="outline">
                  <mat-label>Jumlah Hari/Trip</mat-label>
                  <input #targetJumlahHariPerTrip autocomplete="off"
                         [textMask]="standardInputMask('', ' Hari')"
                         formControlName="jumlahHariPerTrip"
                         appMatInputNext [nextTarget]="targetJumlahHariMenangkap"
                         [previousTarget]="targetGridDaerahPenangkapan"
                         matInput placeholder="Jumlah Hari/Trip">
                </mat-form-field>
              </div>

              <!--Jumlah Hari menangkap-->
              <div class="col-md-6">
                <mat-form-field appearance="outline">
                  <mat-label>Jumlah Hari Menangkap</mat-label>
                  <input #targetJumlahHariMenangkap autocomplete="off"
                         [textMask]="standardInputMask('', ' Hari')"
                         formControlName="jumlahHariMenangkap"
                         appMatInputNext [nextTarget]="targetTotalTangkapanVolume"
                         [previousTarget]="targetJumlahHariPerTrip"
                         matInput placeholder="Jumlah Hari Menangkap">
                </mat-form-field>
              </div>

              <!--Total Tangkapan Volume-->
              <div class="col-md-6">
                <mat-form-field appearance="outline">
                  <mat-label>Total Tangkapan Volume</mat-label>
                  <input #targetTotalTangkapanVolume autocomplete="off"
                         [textMask]="standardInputMask('', ' Kg')"
                         formControlName="totalTangkapanVolume"
                         appMatInputNext [nextTarget]="targetTotalTangkapanIndividu"
                         [previousTarget]="targetJumlahHariMenangkap"
                         matInput placeholder="Total Tangkapan Volume">
                </mat-form-field>
              </div>

              <!--Total Tangkapan Individu-->
              <div class="col-md-6">
                <mat-form-field appearance="outline">
                  <mat-label>Total Tangkapan Individu</mat-label>
                  <input #targetTotalTangkapanIndividu autocomplete="off"
                         [textMask]="standardInputMask('', ' Ekor')"
                         formControlName="totalTangkapanIndividu"
                         appMatInputNext
                         [previousTarget]="targetTotalTangkapanVolume"
                         matInput placeholder="Total Tangkapan Individu">
                </mat-form-field>
              </div>

            </div>

          </mat-card-content>
        </mat-card>
      </div>



      <!--Detail Hasil Tangkapan-->
      <div class="col-md-12 " style="vertical-align: bottom">
        <strong *ngIf="listOfHasilTangkapan('dataRincianTangkapanPendaratan').length === 0; else hasHasilTangkapan"
               class="warn">Belum Ada Hasil Tangkapan</strong>
        <ng-template class=" title-list-hasil-tangkapan" #hasHasilTangkapan>
          <strong >Daftar Hasil Tangkapan
            <strong class="primary">({{listOfHasilTangkapan('dataRincianTangkapanPendaratan').length}})</strong></strong>
        </ng-template>

        <button class="floating-to-right" #tombolTambahHasilTangkapan
                (click)="addHasilTangkapan('dataRincianTangkapanPendaratan')"
                mat-raised-button color="primary">
          <mat-icon class="icon-inside-button">add</mat-icon>&nbsp;&nbsp;Tambah Hasil Tangkapan
        </button>

      </div>
      <div class="col-md-12" formArrayName="dataRincianTangkapanPendaratan">
        <div *ngIf="listOfHasilTangkapan('dataRincianTangkapanPendaratan').length > 0"
             class="col-md-12 hasil-tangkapan-wrapper no-padding">
          <mat-vertical-stepper role="tablist">
            <ng-template matStepperIcon="edit" let-index="index">
              {{index + 1}}
            </ng-template>
            <ng-template matStepperIcon="number" let-index="index">
              {{index + 1}}
            </ng-template>
            <div *ngFor="let hasilTangkapan of listOfHasilTangkapan('dataRincianTangkapanPendaratan'); index as indexHasilTangkapan">
              <mat-step>
                <ng-template class="full-width-table" matStepLabel>
                  <div class="full-width-table" style="display: flex" [formGroupName]="indexHasilTangkapan">
                    <table class="full-width-table table-of-hasil-tangkapan " >
                      <tr>
                        <td class="hasil-tangkapan-spesies">
                          <mat-form-field appearance="outline">
                            <mat-label>Nama Spesies</mat-label>
                            <input autocomplete="off" id="{{prefixElementHasilTangkapan[0] + indexHasilTangkapan}}"
                                   formControlName="uuidSpesies"
                                   appMatInputNext
                                   [nextTarget]="invokeElementById(prefixElementHasilTangkapan[0], prefixElementHasilTangkapan[1], indexHasilTangkapan)"
                                   [previousTarget]="invokeElementById(prefixElementHasilTangkapan[0], prefixElementHasilTangkapan[2], indexHasilTangkapan)"
                                   matInput placeholder="Nama Spesies">
                          </mat-form-field>
                        </td>
                        <td class="hasil-tangkapan-volume">
                          <mat-form-field appearance="outline">
                            <mat-label>Tangkapan Volume</mat-label>
                            <input autocomplete="off" id="{{prefixElementHasilTangkapan[1] + indexHasilTangkapan}}"
                                   [textMask]="standardInputMask('', ' Kg')"
                                   formControlName="tangkapanVolume"
                                   appMatInputNext
                                   [nextTarget]="invokeElementById(prefixElementHasilTangkapan[1], prefixElementHasilTangkapan[2], indexHasilTangkapan)"
                                   [previousTarget]="invokeElementById(prefixElementHasilTangkapan[1], prefixElementHasilTangkapan[0], indexHasilTangkapan)"
                                   matInput placeholder="Tangkapan Volume">
                          </mat-form-field>
                        </td>
                        <td class="hasil-tangkapan-individu">
                          <mat-form-field appearance="outline">
                            <mat-label>Tangkapan Individu</mat-label>
                            <input autocomplete="off" id="{{prefixElementHasilTangkapan[2] + indexHasilTangkapan}}"
                                   [textMask]="standardInputMask('', ' Ekor')"
                                   formControlName="tangkapanIndividu"
                                   appMatInputNext
                                   [nextTarget]="invokeElementById(prefixElementHasilTangkapan[2], prefixElementHasilTangkapan[0], indexHasilTangkapan)"
                                   [previousTarget]="invokeElementById(prefixElementHasilTangkapan[2], prefixElementHasilTangkapan[1], indexHasilTangkapan)"
                                   matInput placeholder="Tangkapan Individu">
                          </mat-form-field>
                        </td>
                      </tr>
                    </table>
                  </div>
                </ng-template>
              </mat-step>
            </div>

          </mat-vertical-stepper>
        </div>
      </div>



      <br><br><br><br><br><br>




    </div>
    <ng-template #loading>
      <app-initializing message="Menginisialisasi Rincian Pendaratan"></app-initializing>
    </ng-template>

    <!--  </div>-->
  </div>
</div>
